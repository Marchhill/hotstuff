\documentclass[12pt]{report}
\usepackage[a4paper, margin=2.2cm]{geometry}
\usepackage{anyfontsize}
\usepackage{setspace}
\usepackage[dvipsnames]{xcolor}
\usepackage[utf8]{inputenc}
\usepackage{ragged2e}
\usepackage{svg}
\usepackage{tikz}
\usepackage{pgf}
\usepackage{titlesec}
\usepackage[hidelinks]{hyperref}
\usepackage{tabularray}
\usepackage{array}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{multicol}
\usepackage{fancyvrb}
\usepackage{amsmath}
\usepackage{algorithm}
\usepackage{url}
\usepackage{pifont}% http://ctan.org/pkg/pifont
\usepackage[]{appendix}
\usepackage{subfiles}
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
\usepackage[noend]{algpseudocode}
\usepackage[edges]{forest}
% \usepackage[
%     backend=biber,
%     style=numeric,
%     sorting=none
% ]{biblatex}
% \addbibresource{references.bib}
\graphicspath{ {images/} }

\usepackage[T1]{fontenc} % to correctly display <, > and | symbols
\setlength\parindent{0pt}

%TC:ignore
\makeatletter         
\renewcommand\maketitle{{
    {\hfill \LARGE  \@author} \\[4ex]
    
    \begin{raggedright}
    
        {\setlength{\parindent}{0pt} \fontsize{40}{20} \renewcommand{\baselinestretch}{2} \bfseries \@title \par}

        \vspace{4ex}

        \begin{spacing} {0.25}
            \noindent\rule{\linewidth}{0.4pt} 
            \noindent\rule{\linewidth}{0.4pt}
        \end{spacing}

        \vspace{4ex}
        
        \LARGE Computer Science Tripos Part II

        \LARGE Gonville and Caius College
        
        \LARGE \@date
        
    \end{raggedright}
        
}}
\makeatother

\title{Implementing the HotStuff consensus algorithm}
\author{Marc Harvey-Hill}
\date{May 2023}

\titleformat{\chapter}[display]
  {\bfseries\Huge}
  {\filleft\Large\chaptertitlename~\thechapter}
  {0ex}
  {}
  [\vspace{-\baselineskip}\noindent\rule{\linewidth}{0.4pt}\vspace{-\baselineskip}]

\newtheorem{theorem}{Theorem}[section]
\newtheorem{property}{Property}[section]
\newtheorem{assumption}{Assumption}[section]
\newtheorem{lemma}[theorem]{Lemma}

% New definitions
\algnewcommand\algorithmicmatch{\textbf{match}}
\algnewcommand\algorithmicwith{\textbf{with}}
\algnewcommand\algorithmiccase{|}
% New "environments"
\algdef{SE}[MATCH]{Match}{EndMatch}[1]{\algorithmicmatch\ #1\ \algorithmicwith}{\algorithmicend\ \algorithmicmatch}%
\algdef{SE}[CASE]{Case}{EndCase}[1]{\algorithmiccase\ #1 $\to$}{\algorithmicend\ \algorithmiccase}%
\algtext*{EndMatch}%
\algtext*{EndCase}%

\begin{document}

\begin{titlepage}
    \maketitle

    \vfill

    \noindent\includegraphics[scale=0.1]{university.png}

    \tikz[remember picture,overlay] \node[opacity=0.3,inner sep=0pt] at (current page.center){\includegraphics[width=\paperwidth,height=\paperheight]{featured_image.jpeg}};
\end{titlepage}

\setlength{\parskip}{\baselineskip}

\chapter*{Declaration of Originality}

I, Marc Harvey-Hill of Gonville and Caius College, being a candidate for Part II of the Computer Science Tripos, hereby declare that this dissertation and the work described in it are my own work, unaided except as may be specified below, and that the dissertation does not contain material that has already been used to any substantial extent for a comparable purpose. In preparation of this dissertation I did not use text from AI-assisted platforms generating natural language answers to user queries, including but not limited to ChatGPT. I am content for my dissertation to be made available to the students and staff of the University.

\noindent Signed: Marc Harvey-Hill

\noindent Date: 9\textsuperscript{th} May 2023

\chapter*{Proforma}

{\large
\begin{tabular}{ll}
Candidate Number:   & \bf 2409B \\
College:            & \bf Gonville \& Caius College                    \\
Project Title:      & \bf Implementing the HotStuff consensus algorithm \\
Examination:        & \bf Computer Science Tripos -- Part II, 2023  \\
Word Count:         & \bf 11,612\footnotemark[1] \\
Code line Count:    & \bf 4,190\footnotemark[2] \\
Project Originator: & Christopher Jensen and 2409B \\
Supervisor:         & Christopher Jensen \\ 
\end{tabular}
}
\footnotetext[1]{Computed by \texttt{texcount -inc main.tex}}
\footnotetext[2]{Computed by \textit{VS Code Counter}}
\stepcounter{footnote}

\section*{Original Aims of the Project}

HotStuff is a byzantine-fault tolerant consensus algorithm that allows a group of participants to reach consensus when some proportion of them act maliciously. It can be used to develop blockchains which underlie cryptocurrencies and other decentralised applications. This project aimed to implement the HotStuff algorithm based on a paper by Yin et. ~al~ \cite{yinHotStuffBFTConsensus2019}, demonstrate its correctness, and evaluate its performance. As an extension, further optimisations were to be implemented on the basic algorithm.


\section*{Work Completed}

This project includes a full specification of the HotStuff algorithm, filling in the gaps from the original paper with other protocols from the literature, and our changes. We provide a correct implementation of the algorithm with several optimisations, which are shown to be effective in an evaluation. This project paves the way for future HotStuff implementations by describing non-trivial challenges that were encountered during development and giving solutions and practical optimisations. We synthesised information from the literature to give a full explanation of the algorithm and how it can be logically derived from additions to simpler consensus algorithms.

\section*{Special Difficulties}

None.

\tableofcontents
%TC:endignore 

% \setcounter{chapter}{1}
\chapter{Introduction}
% \addcontentsline{toc}{chapter}{Introduction}

\input{chapters/introduction.tex}

% \stepcounter{chapter}
\chapter{Preparation} \label{preparation}
% \addcontentsline{toc}{chapter}{Preparation}

\input{chapters/preparation.tex}

% \stepcounter{chapter}
\chapter{Implementation} \label{implementation}
% \addcontentsline{toc}{chapter}{Implementation}

\input{chapters/implementation.tex}

% \stepcounter{chapter}
\chapter{Evaluation} \label{evaluation}
% \addcontentsline{toc}{chapter}{Evaluation}

\input{chapters/evaluation.tex}

% \stepcounter{chapter}
\chapter{Conclusion}
% \addcontentsline{toc}{chapter}{Conclusion}

\input{chapters/conclusion.tex}

\bibliographystyle{unsrt}
\bibliography{ref}
% \printbibliography
\addcontentsline{toc}{chapter}{Bibliography}

%TC:ignore
\begin{appendices}
\chapter{Proposal} \label{proposal}
\subfile{chapters/proposal.tex}
\end{appendices}
%TC:endignore 

\end{document}
